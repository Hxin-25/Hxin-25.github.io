# 项目待办事项

此文件用于记录项目中待处理或未来可能需要完善的事项。

---

### 1. 评论系统

- **状态**: 待定
- **描述**: 当前网站没有配置有效的评论系统。`_config.yml` 中的 `disqus_username` 仍然是原作者的占位符。
- **可选方案**:
    - **Disqus**: 快速集成，但免费版有广告。
    - **Giscus**: 推荐方案。开源、无广告，使用 GitHub Issues 作为后端，与项目契合度高。
    - **Waline/Twikoo**: 高级自托管方案，控制权最高，但配置复杂。
- **下一步**: 待用户决定采用何种方案后再进行配置。

---

### 2. 友情链接

- **状态**: 待办
- **描述**: `_config.yml` 中的 `friends` 列表仍然是原作者的链接。
- **下一步**: 待用户提供新的友情链接列表后，进行替换。

---
---

# 商业化标准审查报告 (2025-07-24)

本文档记录了对项目进行的系统性审查，旨在将项目提升至商业化标准。

## 审查方法

审查分为三个独立阶段，每个阶段关注一个核心领域：

1.  **代码质量与可维护性**: 审查代码的结构、逻辑清晰度、是否遵循设计模式，以及是否存在“代码坏味”，旨在评估项目的长期维护成本。
2.  **性能与用户体验 (UX)**: 审查影响网站加载速度和用户交互体验的因素，包括资源加载策略、图片优化、响应式设计等。
3.  **安全与最佳实践**: 审查项目的依赖库、外部链接处理、安全配置（如CSP）以及是否遵循通用的Web开发最佳实践。

## 审查发现与改进计划

### 第一部分：代码质量与可维护性

- **Q1 [轻微]**: **硬编码的颜色值**
    - **问题描述**: 在 `less/hxin-blog.less` 中，部分UI元素的颜色值（如链接、引用）是直接写死的（e.g., `gray`, `#337ab7`），没有使用 `variables.less` 中定义的变量。
    - **影响**: 降低了主题的可维护性。未来若想全局更换配色，需要修改多处代码，容易遗漏。
    - **解决方案**: 将所有硬编码的颜色值替换为 `variables.less` 中已定义或新增的变量。例如，为引用文本创建一个 `@blockquote-color` 变量。

- **Q2 [轻微]**: **废弃的注释**
    - **问题描述**: 代码中残留了原作者的开发注释（e.g., `// Unuse by Hux`），对当前项目是无用信息。
    - **影响**: 降低了代码的信噪比，轻微影响代码整洁度。
    - **解决方案**: 安全地移除这些与当前项目无关的注释。

- **Q3 [中等]**: **强依赖 jQuery**
    - **问题描述**: `js/hxin-blog.js` 中的所有交互逻辑都依赖于 jQuery。
    - **影响**: jQuery 是一个相对较重的库，在现代浏览器中，其大部分功能都可由原生JavaScript（Vanilla JS）以更轻量、更高效的方式实现。这构成了项目的技术债务。
    - **解决方案**: (长期计划) 将 `hxin-blog.js` 中的交互逻辑（如导航栏滚动特效、响应式表格包裹等）逐步重构为原生 JavaScript，最终移除对 jQuery 的依赖。

- **Q4 [可优化]**: **构建工具可升级**
    - **问题描述**: 项目使用 Grunt 作为构建工具。
    - **影响**: Grunt 可用，但其生态和性能已不如 Vite、Webpack 等现代构建工具。
    - **解决方案**: (可选高级优化) 将项目迁移到更现代的构建工具（如 Vite），可以获得热模块替换（HMR）、更快的编译速度和更丰富的插件生态，极大地提升开发体验。

### 第二部分：性能与用户体验 (UX)

- **P1 [中等]**: **CSS 阻塞渲染**
    - **问题描述**: 所有CSS（Bootstrap, Font Awesome, 主题样式）都在 `<head>` 中以同步方式加载。
    - **影响**: 浏览器必须等待所有CSS下载并解析完毕才能渲染页面，增加了用户的白屏等待时间。
    - **解决方案**:
        1.  **关键CSS内联**: 将渲染首屏内容所必需的最小化CSS直接内联到HTML的`<style>`标签中。
        2.  **异步加载非关键CSS**: 使用 `<link rel="preload" href="style.css" as="style" onload="this.onload=null;this.rel='stylesheet'">` 的方式异步加载完整的CSS文件。

- **P2 [严重]**: **JS 阻塞渲染**
    - **问题描述**: 核心JS文件（jQuery, Bootstrap等）虽然在 `<body>` 底部加载，但未使用 `async` 或 `defer` 属性。
    - **影响**: 浏览器在解析HTML时遇到这些 `<script>` 标签会暂停，直到脚本下载并执行完毕，严重影响页面的可交互时间。
    - **解决方案**: 为所有非关键的 `<script>` 标签添加 `defer` 属性。`defer` 能保证脚本在HTML文档完全解析完毕后，按顺序执行，且不阻塞解析过程。

- **P3 [严重]**: **外部字体库阻塞**
    - **问题描述**: Font Awesome 图标字体从外部CDN同步加载。
    - **影响**: 这是最严重的性能瓶颈之一。如果CDN服务器缓慢或故障，整个网站将无法加载。
    - **解决方案**:
        1.  **字体库本地化**: 将 Font Awesome 字体文件下载到项目本地，与其他静态资源一同提供服务，消除外部依赖。
        2.  **使用现代图标方案**: 放弃字体图标，改用SVG图标。可以通过Jekyll的`include`功能直接将SVG代码嵌入HTML，或者使用SVG sprite技术，这是性能和可访问性都更优的方案。

- **P4 [中等]**: **图片格式陈旧**
    - **问题描述**: 项目中的图片未使用现代高效的图片格式（如 WebP, AVIF），也未实现响应式图片。
    - **影响**: 用户（特别是移动端）被迫加载体积过大的图片，浪费流量，延长加载时间。
    - **解决方案**:
        1.  **格式转换**: 使用工具将现有图片转换为 WebP 格式。
        2.  **使用 `<picture>` 元素**: 在HTML中，使用 `<picture>` 元素为同一张图片提供多种格式的来源，让浏览器自己选择最高效的格式加载。`<picture><source srcset="img.webp" type="image/webp"><img src="img.png"></picture>`
        3.  **使用 `srcset`**: 为不同屏幕分辨率提供不同尺寸的图片。

- **P5 [可优化]**: **缺少加载状态提示**
    - **问题描述**: 页面跳转时，在网络延迟的情况下没有即时反馈。
    - **影响**: 用户体验不佳，可能导致用户误认为网站无响应。
    - **解决方案**: 引入一个轻量级的JS库（如 NProgress.js），在页面顶部实现一个加载进度条，提供即时的视觉反馈。

### 第三部分：安全与最佳实践

- **S1 [中等]**: **依赖库版本过时**
    - **问题描述**: `package.json` 中定义的 `npm` 依赖库版本非常陈旧。
    - **影响**: 旧版本可能包含已知的安全漏洞（CVEs），给项目带来安全风险。
    - **解决方案**: 定期运行 `npm audit` 来检查漏洞，并使用 `npm update` 将依赖库更新到最新的稳定版本。

- **S2 [轻微]**: **外部链接缺少 `rel` 属性**
    - **问题描述**: 在新标签页中打开的外部链接 (`target="_blank"`) 缺少 `rel="noopener noreferrer"` 属性。
    - **影响**: 存在"tabnabbing"安全风险，并可能泄露来源信息。
    - **解决方案**: 审查所有 `target="_blank"` 的链接，并确保它们都包含了 `rel="noopener noreferrer"`。

- **S3 [未配置]**: **缺少内容安全策略 (CSP)**
    - **问题描述**: 项目未配置CSP。
    - **影响**: 缺少一层关键的、能有效抵御跨站脚本（XSS）攻击的防御机制。
    - **解决方案**: 在 `_config.yml` 中配置 `jekyll-helmet` 等插件，或在部署平台（如Netlify, Vercel）的HTTP头配置中，添加一个严格的CSP规则，只允许从可信来源加载资源。

- **S4 [可优化]**: **可访问性 (a11y) 可提升**
    - **问题描述**: 部分交互元素（如导航切换按钮）的 `aria` 属性可以更完善。
    - **影响**: 屏幕阅读器用户的体验可能不是最优的。
    - **解决方案**: 审查关键UI组件，确保它们都拥有合适的 `role` 和 `aria-*` 属性，例如为汉堡菜单按钮添加 `aria-expanded` 来表示其展开/折叠状态。